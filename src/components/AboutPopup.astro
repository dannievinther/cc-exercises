---
import InfoIcon from "../icons/info.svg";

const { class: className } = Astro.props;
---

<button class={className} popovertarget="about-box">
  <InfoIcon stroke-width={2} width={20} height={20} />
  <span class="visually-hidden">Om øvelserne</span>
</button>

<div popover id="about-box">
  <header>
    <button popovertarget="about-box">Luk</button>
    <h2>Om øvelserne</h2>
  </header>
  <p>
    Bliv fortrolig med CSS Grid, Flexbox og Subgrid gennem praktiske,
    interaktive opgaver.
  </p>
  <p>
    Her kan du øve dine færdigheder i CSS Grid, Flexbox og Subgrid gennem
    praktiske, interaktive opgaver. Øvelserne dækker både de grundlæggende og de
    mere avancerede teknikker inden for moderne layout-metoder.
  </p>
  <p>
    Du får mulighed for at arbejde med alt fra simple grid- og flex-strukturer
    til mere komplekse features som placering, auto-fit, navngivning af
    grid-linjer og Subgrid-nedarvning. Undervejs får du også indblik i, hvornår
    de forskellige teknikker er bedst at bruge, og hvordan de kan kombineres for
    at skabe fleksible, responsive layouts på tværs af flere niveauer.
  </p>
  <p>
    Formålet er, at du gennem hands-on erfaring opnår en intuitiv forståelse af,
    hvordan man bygger moderne CSS-layouts. Du vælger selv, om du vil dykke ned
    i Grid, Flexbox, Subgrid – eller dem alle!
  </p>
  <h3>Sådan laver du en øvelse</h3>
  <ol>
    <li>
      Læs opgavebeskrivelsen – den forklarer, hvad du skal opnå med CSS-koden.
    </li>

    <li>
      Brug tekstfeltet til at skrive eller tilrette CSS’en for <code
        >.container</code
      > og de enkelte bokse.
    </li>

    <li>
      Hvis du vil starte forfra med en opgave, så tryk <kbd>ESC</kbd>, mens du
      har markøren i tekstfeltet, hvorefter du skal bekræfte. Så nulstilles
      opgaven.
    </li>

    <li>Brug hints og referencelinks under hver opgave, hvis du går i stå.</li>

    <li>
      Når du ser ændringen ske i preview-området, ved du, at din kode virker!
    </li>

    <li>
      Eksperimentér gerne videre og se, hvordan ændringer påvirker layoutet.
    </li>
  </ol>
  <p>
    <i>Tip:</i> Du kan bruge genveje som <kbd>df</kbd> eller <kbd>dg</kbd>, hvis
    du hurtigt vil skrive hhv. <code>display: flex;</code> og <code
      >display: grid;</code
    >. Du kan også klikke direkte på kode-eksemplerne i hints og i
    opgavebeskrivelserne, for at indsætte dem i tekstfeltet.
  </p>
</div>

<style>
  .about-button {
    all: unset;
    background: var(--surface-elevated);
    border-radius: 1e5px;
    corner-shape: squircle;
    padding: var(--space-1);
    box-shadow: var(--shadow-ui);
    display: grid;
    cursor: pointer;

    &:hover {
      background: oklch(from currentcolor 95% 0 h);
    }
    &:active {
      scale: 0.97;
    }
  }

  [popover] {
    &,
    &::backdrop {
      transition: display, overlay, opacity, translate;
      transition-duration: 0.3s;
      transition-behavior: allow-discrete;
      opacity: 0;
      translate: 0 -2rlh;
    }

    &::backdrop {
      backdrop-filter: blur(5px);
      translate: none;
      background: var(--surface-backdrop);
    }

    &:where(:popover-open) {
      opacity: 1;
      translate: none;

      &::backdrop {
        opacity: 1;
        /* backdrop-filter: blur(5px); */
        /* background: #000c; */
        /* translate: none; */
      }
    }

    @starting-style {
      &:popover-open {
        translate: 0 2rlh;
      }
      &:popover-open,
      &:popover-open::backdrop {
        opacity: 0;
      }
    }
  }

  [popover] {
    overscroll-behavior: contain;
    max-block-size: 90dvb;
    inline-size: min(65ch, 90dvi);
    padding: var(--space-6);
    padding-block-start: 0;
    border: 0;
    border-radius: var(--bdrs-xl);
    box-shadow: var(--shadow-border);
    background: var(--ui-surface);

    > * + * {
      margin-block-start: var(--fspace, 1rlh);
      &:is(h3) {
        --fspace: 2rlh;
      }
    }

    h2 {
      font-family: var(--font-mona);
      font-weight: 600;
      --min-font: 18;
      --max-font: 22;
      --screen-max: 1200;
      --screen-min: 375;
      font-size: clamp(
        var(--min-font) * 1px,
        var(--responsive),
        var(--max-font) * 1px
      );
      line-height: 1.125;
    }

    h3 {
      font-family: var(--font-mona);
      font-weight: 600;
      --min-font: 16;
      --max-font: 18;
      --screen-max: 1200;
      --screen-min: 375;
      font-size: clamp(
        var(--min-font) * 1px,
        var(--responsive),
        var(--max-font) * 1px
      );
      line-height: 1.3;
    }

    p,
    ol {
      color: var(--gray-900);
      font-weight: 420;
      font-size: 1rem;
      font-family: var(--font-mona);
    }

    kbd {
      background-color: #eeeeee;
      border-radius: 3px;
      border: 1px solid #b4b4b4;
      box-shadow:
        0 1px 1px rgb(0 0 0 / 0.2),
        0 2px 0 0 rgb(255 255 255 / 0.7) inset;
      color: #333333;
      display: inline-block;
      font-size: 0.85em;
      font-weight: 700;
      line-height: 1;
      padding: 2px 4px;
      white-space: nowrap;
    }

    code {
      display: inline-block;
      padding-inline: var(--space-2);
      padding-block: 0;
      font-size: 0.9em;
      border-radius: var(--bdrs-md);
      color: var(--gray-1000);
      background: var(--ui-surface);
      box-shadow: var(--shadow-code);
    }

    ::marker {
      color: var(--blue-700);
    }

    ol {
      padding-inline-start: 1rem;
      line-height: 1.5;
      display: grid;
      gap: 0.5rlh;
      li {
        text-wrap: pretty;
      }
    }

    header {
      display: flex;
      flex-flow: row-reverse wrap;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      inset-block-start: 0;
      background: var(--ui-surface);
      padding-block: var(--space-6) var(--space-5);
      background: var(--ui-surface);
      border-block-end: 1px solid rgb(0 0 0 / 8%);
    }

    button {
      background: var(--ui-surface);
      box-shadow: var(--shadow-ui);
      border-radius: var(--bdrs-round);
      padding: 0.15rlh 0.5rlh;

      &:hover {
        background: oklch(from currentcolor 95% 0 h);
      }
      &:active {
        scale: 0.97;
      }
    }
  }
</style>
