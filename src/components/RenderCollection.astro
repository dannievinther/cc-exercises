---
const { collection, theme, hasWarning } = Astro.props;

import { getCollection } from "astro:content";
import Exercises from "../components/Exercises.astro";
import SDAExercises from "../components/SDAExercises.astro";
import Base from "../layouts/Base.astro";

const exEntries = await getCollection(collection);

const sorted = exEntries.sort((a: { id: string }, b: { id: string }) =>
  a.id.localeCompare(b.id, undefined, { numeric: true })
);

const title = collection.charAt(0).toUpperCase() + collection.slice(1);

// Use SDA-specific component for scroll-driven animations
const ExerciseComponent = collection === "sda" ? SDAExercises : Exercises;
---

<Base {title} {hasWarning} {theme}>
  {
    sorted.map((entry, index) => (
      <ExerciseComponent {entry} index={index + 1} total={sorted.length} />
    ))
  }
</Base>
