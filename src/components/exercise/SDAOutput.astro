---
const { boxContent = "I'm a box", startingHTML, markers = false } = Astro.props;
---

<div class="sda-result output">
  <div class="container" data-markers={markers} set:html={startingHTML} />
</div>

<style>
  .sda-result {
    overscroll-behavior: contain;
    container: sda-result / size var(--scroll-state-not-supported, scroll-state);
    background:
      conic-gradient(
          from 90deg at 1px 1px,
          #0000 25%,
          oklch(from var(--ui-primary) 0.97 0.05 h) 0
        ) -0.5px -1px / 25px 25px round local,
      #fff;
    border-radius: var(--bdrs-xl);
    min-height: 300px;
    overflow-y: auto;
    position: relative;
    padding: 0.5lh;
    box-shadow:
      0 0 0 1px color-mix(in oklch, var(--ui-primary-border) 50%, transparent),
      inset 0 0 80px -40px var(--ui-primary);
    @supports not (container: sda-result / size scroll-state) {
      --scroll-state-not-supported: ;
    }

    /* Create scroll space before and after */
    &::before,
    &::after {
      content: "";
      display: grid;
      place-content: center;
      block-size: calc(100% + 1rlh);
      content: "Scroll ↓";
      translate: 0 -1lh;
      font-weight: 800;
      color: var(--ui-primary-dark);
    }
    &::after {
      content: "Scroll ↑";
      translate: 0 1rlh;
    }

    .container {
      padding: 1lh;

      .frame {
        display: grid;
      }
    }

    .container[data-markers="true"] {
      outline: 1px dashed;
      outline-offset: -1px;
      position: relative;
      color: var(--ui-primary-dark);
      &::before {
        content: ".container";
        position: absolute;
        inset: -1.2cap 0 auto 0;
        justify-self: center;
        font-size: 0.8em;
        background: #fff;
        padding-inline: 0.5ch;
        pointer-events: none;
      }
      .frame {
        color: var(--ui-primary-border);
        outline: 1px dashed;
        outline-offset: -1px;
        &::before {
          content: ".frame";
          position: absolute;
          inset: -1.2cap 0 auto 0;
          justify-self: center;
          font-size: 0.8em;
          background: #fff;
          padding-inline: 0.5ch;
          pointer-events: none;
        }
      }
    }

    .box {
      background: var(--ui-primary);
      color: var(--gray-900);
      padding: var(--space-4) var(--space-6);
      border-radius: var(--bdrs-md);
      font-weight: 600;
      font-size: 0.875rem;
      box-shadow:
        0 0 0 1px var(--ui-primary-border),
        0 2px 2px rgba(0, 90, 250, 0.05),
        0 4px 4px rgba(0, 90, 250, 0.05),
        0 8px 8px rgba(0, 90, 250, 0.05),
        0 16px 16px rgba(0, 90, 250, 0.05);
    }
  }
</style>
