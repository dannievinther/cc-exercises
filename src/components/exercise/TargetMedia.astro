---
// import { Image } from "astro:assets";
import { Picture } from "astro:assets";
const { index, image, video } = Astro.props;
// Use lazy loading for all items except first, and preload="none" for videos below fold
const isFirst = index === 1;
---

{
  video ? (
    <picture>
      <video
        muted
        loop
        autoplay
        playsinline
        preload={isFirst ? "metadata" : "none"}
      >
        <source src={video} type="video/mp4" />
      </video>
    </picture>
  ) : (
    <Picture
      src={image}
      alt=""
      loading={isFirst ? "eager" : "lazy"}
      fetchpriority={isFirst ? "high" : "low"}
      format="avif"
      formats={["avif", "webp"]}
    />
  )
}

<style>
  :global(picture) {
    padding-inline: calc(var(--space-1) / 2);
  }
  img {
    background: #f1eef5;
  }
</style>
